# Shared-Memory Synchronization

Michael L. Scott

### 1. 原子性和条件同步

实际上，现实程序中几乎所有的同步模式（即所有对可接受的交错执行的概念上的约束）都可以看作是原子性或条件同步的实例。

原子性确保指定的指令序列在参与任何可能的交互时，是一个不可分割的整体，即在执行过程中不会出现任何其他操作（请注意，交错的概念本身就是基于底层机器指令是原子性的假设）。

条件同步可确保在某些必要的前提条件成立之前，不会发生指定的操作。通常，这个先决条件是在其他线程中完成某些操作。

### 2. 安全性和活性

无论是基于自旋还是阻塞，正确的同步实现都需要安全性和活性。

非正式地说，安全性意味着坏的事情一定不会发生；活性意味着好的事情总会发生。

### 3. 顺序一致性和可串行性

如果说并发对象 O 的实现是顺序一致的，则必须满足：在任意可能的执行中，在对象 O 上操作的（有相同的输入输出）全局次序，与每个线程中的程序顺序是一致的。

不幸的是，顺序一致性缺乏可复合性，这限制其对高级并发对象的用途。

多对象原子操作是数据库系统的基本特征，被称之为事务。

对数据库和内存而言，最简单的排序标准叫作可串行性。如果事务之间按照某种全局次序依次执行，而具有相同的执行效果，就说这些事务是可串行化的。

判断给定的事务集合是否可串行化是 NP-难问题。好在实际中我们不需要这样做，我们只需使用全局锁（或细粒度锁）或非阻塞方式来保证可串行化就行。

顺序一致性和可串行性相似，都有一个共同的弱点：缺乏线程可观察到的其他顺序所需的一致性。
