### 1. `#!`

shebang 是指出现在文本文件的第一行前两个字符 `#!`

在 unix 系统中，程序会分析 `#!` 字符后面的内容，作为解释器的指令，比如：

以`#!`/bin/sh 开头的文件，程序在执行的时候会调用/bin/sh，也就是 bash 解释器；

以`#!`/usr/bin/python 开头的文件，就代表指定 python 解释器去执行。

如果没有指定 shebang，脚本执行的时候就默认用 shell 去解释脚本。

如果指定了 shebang，脚本执行的时候，文件名就会作为参数传递给指定的解释器。

如果指定的解释器没有可执行权限，则会报：bad interpreter:permission denied。

如果脚本是一个不可执行文件，那么指定的解释器程序会被忽略，转而交给当前的 shell 去执行这个脚本。

如果脚本指定的解释器不存，则会报：bad interpreter:no such file or directory。

`#!`后面的解释程序的路径要写绝对路径，因为不会自动到 path 中自己寻找解释器的。

如果用户使用 bash test.sh 命令执行 test.sh 脚本的时候，`#!`一行将被忽略，优先使用用户指定的解释器。

### 2. 定义变量的规则

（1）变量和赋值之间不得有空格，因为在 linux 中空格一般是命令和参数之间加空格的，所以有空格就被识别为命令和参数的意思了，去找这个命令就会报错，没有这个命令。

（2）名称不得用关键字、不得以数字开头、不得用标点符号、严格区分大小写。只能包含字母、数字、下划线。

### 3. 引号

单引号('')：单引号被识别为普通字符串，就是不识别引号里面的特殊字符，属于强引用。

双引号("")：双引号里面的特殊字符是可以被识别的，是弱引用。

反引号(``)：在 linux 中，反引号中的内容一般是一行或多行命令，当这些命令被反引号引着，命令执行结果就会以字符串的形式被保留下来。

无引号：如何是连续的符号可以不加引号，但是如果有空格就有歧义，最好使用双引号。

### 4. 特殊参数变量

```
$0 ：获取shell脚本文件名、以及脚本路径
$1 ：获取第一个参数
$2、$3、$4、$5、$6、$7、$8、$9、${n}（n 大于 9 就得这样写，比如${10}）：获取第n个参数
$# ：获取执行的 shell 脚本后面的参数总个数
$* ：获取shell脚本传递过来的所有参数
$@ ：也是获取 shell 脚本传递过来的所有参数
```

当$* 和$@ 不被双引号""引住时，它们之间是没有任何区别的，都是将接收到的每个参数看做一份数据，彼此之间以空格来分隔。

当$* 和$@ 被双引号""引住时，"$*" 会将所有的参数从整体上看作一份数据，而不是把每个参数都看作一份数据。也就是参数之间是无法分隔的，因为是一份数据嘛。而"$@" 依然是将每个参数都看作一份数据，彼此之间是独立的，就是有参数个数份数据。

### 5. 特殊状态变量

```s
$? 上一次命令执行状态，返回值是 0，表示上一条命令成功执行，返回值非 0，表示上一条命令执行失败。

$$ 获取当前shell脚本的进程号。我们在脚本开发中，根据这个变量的返回值，我们可以开发一些启停脚本等进程管理的文件。

$! 取出上一次、后台进程的PID。

$_ 取得上一条命令传入的最后一个参数。
```

### 6. 环境变量

环境变量可以在命令行中临时创建，但是用户退出 shell 终端，变量随即丢失。如果要永久生效，需要修改环境变量的配置文件。

用户个人配置文件 ~/.bash_profile 、~/.bashrc ，这 2 个文件是远程登录用户特有的文件。

全局配置文件/etc/profile、/etc/bashrc, 但是系统建议最好创建在/etc/profile.d/，而非直接修改主文件，因为修改全局配置文件，影响所有登录系统的用户。

```s
# 检查系统环境变量的命令：

set：输出当前的shell环境中的所有变量，包括全局变量及局部变量(这个局部变量指sh脚本文件中定义的变量)。

env：只显示全局变量

declare：同set功能，输出所有变量。

export：显示和设置环境变量值

# 撤销环境变量：

unset 变量名：删除变量或函数

# 设置只读变量：

readonly，只有shell结束，只读变量失效。

```

### 7. 基础的内置命令

```s
echo：-n不换行输出；-e解析字符串中的特殊字符
printf：也是打印命令
eval：表示执行多个命令
exac：不创建子进程执行后续命令，且执行完毕后自动exit
export、read、shift

\n 换行
\r 回车
\t 制表符 四个空格
\b 退格
```

### 8. 条件判断

```s
[ condition ] 注意condition前后要有空格。非空返回0，0为 true，否则为 false 。

$((运算式)) 或 $[运算式]

# if
if [ 条件判断式 ];then
    程序
fi

# 或者（推荐）
if [ 条件判断式 ]
then
    程序
elif [ 条件判断式 ]
then
    程序
fi

# case
case $变量名 in
"值1")
如果变量值等于值1，则执行此处程序1
;;
"值2")
如果变量值等于值2，则执行此处程序2
;;
...省略其它分支...
*)
如果变量值不等于以上列出的值，则执行此处程序
;;
esac

# 语法1
for 变量名 in 值1 值2 值3...
do
    程序
done

# 语法2
for ((初始值;循环控制条件;变量变化))
do
    程序
done

# while
while [ 条件判断式 ]
do
    程序
done 

# read
-p：指定读取值时的提示符
-t：指定读取值时等待的时间（秒），如果没有在指定时间内输入，就不再等待了。

basename，删掉路径最后一个 / 前的所有部分（包括/），常用于获取文件名

dirname，删掉路径最后一个 / 后的所有部分（包括/），常用于获取文件路径
```
